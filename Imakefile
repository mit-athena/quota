#ifdef UseInstalled
ATTACH=/source/athena/athena.bin/attach
#else
ATTACH=../../athena.bin/attach
#endif

DEFINES=$(MACHDEFS) -I. -I$(ATTACH) -I$(AFSDIR)/include

BINDIR=$(ATHBINDIR)
INSTOPT=-o root -m 4755
#ifdef sgi
AFSLIBS= $(AFSDIR)/lib/afs/libsys.a -L$(AFSDIR)/lib -lrx \
	$(AFSDIR)/lib/afs/libsys.a -llwp
#else
AFSLIBS= $(AFSDIR)/lib/afs/libsys.a -L$(AFSDIR)/lib -lrx -llwp
#endif

OBJS = quota.o attachtab.o nfs.o afs.o $(MACHOBJS)
#ifdef SOLARIS
LIBS = $(MACHLIBS) $(AFSLIBS) 
LDLIBS=/usr/athena/lib/libresolv.a -lsocket -lnsl /usr/ucblib/libucb.a -lelf -ldl
#else
LIBS = $(MACHLIBS) $(AFSLIBS)
#endif

#if defined(vax) || defined(ibm032)
BINDIR=/usr/ucb
MACHDEFS= -DUW
MACHLIBS= -lrpcsvc
#endif

#if defined(i386)
MACHLIBS= -lrpclib
#endif

#if defined(_IBMR2) || defined(SOLARIS) || defined(sgi)
MACHOBJS=rcquotaxdr.o rquotaxdr.o mountxdr.o
#endif

#if defined(ultrix) || defined(i386)
MACHOBJS=rcquotaxdr.o
#endif

build_program(quota,$(OBJS),,$(LIBS))
install_program(quota,$(INSTOPT),$(BINDIR))
install_man(quota.1,quota.1)

